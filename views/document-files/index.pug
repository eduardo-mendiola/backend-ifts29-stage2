extends ../layout.pug
//- views/document-files/index.pug
block content
  .d-flex.justify-content-between.align-items-center.mb-4
    h1.mb-0 Lista de Documentos
    a.btn.btn-primary(href="/document-files/new") Nuevo Documento
    
  //- Incluir barra de búsqueda, modal y JS común
  include ../partials/common-table-scripts.pug

  table.table.table-hover.table-index
    thead
      tr
        th №
        th Código
        th Proyecto
        th Cargado por
        th Título
        th.text-end.pe-5 Acciones
    tbody
      each item, index in items
        tr(data-id=item.id, data-code=`${item.code}`, data-textmodal1=`Título: ${item.title}`)
          td= index + 1
          td= item.code ? item.code : 'N/A'
          td= item.project_id ? item.project_id.name : 'N/A'
          td= item.uploaded_by ? item.uploaded_by.full_name : 'N/A'
          td= item.title || 'N/A'
          td.text-end
            a.btn.btn-gray.btn-sm.me-2(href=`/document-files/${item.id}`) Ver
            if hasPermission('edit_document_files')
              a.btn.btn-gray.btn-sm.me-2(href=`/document-files/${item.id}/edit`) Editar
            if hasPermission('delete_document_files')
              form(action=`/api/document-files/${item.id}?_method=DELETE`, method="POST", style="display:inline;")
                input(type="hidden", name="_method", value="DELETE")
                button.btn.btn-danger-soft.btn-sm.delete-btn(data-id=item.id) Eliminar