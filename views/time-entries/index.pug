extends ../layout.pug

block content
  .d-flex.justify-content-between.align-items-center.mb-4
    h1.mb-0 Registro de actividades
    a.btn.btn-primary(href="/time-entries/new") Nueva Registro

  //- Incluir barra de búsqueda, modal y JS común
  include ../partials/common-table-scripts.pug

  //- Tabla específica de este index
  table.table.table-hover.table-dark
    thead
      tr
        th №
        th Código 
        th Fecha 
        th Usuario
        th Proyecto
        th.text-end.pe-5 Acciones
    tbody
      each item, index in items
        tr(data-id=item.id, data-code=`${item.code}`, data-textmodal1=`Registro Código: ${item.code}`, data-textmodal2 =`Usuario: ${item.user_id.first_name} ${item.user_id.last_name}`)
          td= index + 1
          td= item.code
          td= item.date ? new Date(item.date).toLocaleDateString('es-AR', { timeZone: 'UTC' }) : 'N/A'
          td= item.user_id.first_name + " " + item.user_id.last_name
          td= item.task_id.project_id.name
          td.text-end
            a.btn.btn-gray.btn-sm.me-2(href=`/time-entries/${item.id}`) Ver
            a.btn.btn-gray.btn-sm.me-2(href=`/time-entries/${item.id}/edit`) Editar
            form(action=`/api/time-entries/${item.id}?_method=DELETE`, method="POST", style="display:inline;")
              input(type="hidden", name="_method", value="DELETE")
              button.btn.btn-danger-soft.btn-sm.delete-btn(data-id=item.id) Eliminar

 
