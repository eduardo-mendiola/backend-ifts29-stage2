doctype html
html
  head
    meta(charset="utf-8")
    title Factura #{item.invoice_number || item.code}
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")
    style.
      body {
        background: #fff;
        color: #000;
        font-family: Arial, sans-serif;
        margin: 40px;
      }
      .invoice-header {
        border-bottom: 2px solid #000;
        margin-bottom: 20px;
        padding-bottom: 10px;
      }
      .invoice-title {
        font-size: 2rem;
        font-weight: bold;
      }
      .table th, .table td {
        vertical-align: middle !important;
      }
      .totals {
        text-align: right;
      }

  body
    .container
      .invoice-header.d-flex.justify-content-between.align-items-center
        div
          h1.invoice-title Factura #{item.invoice_number || item.code}
          p.mb-0 Fecha de emisión: #{item.issue_date}
          p.mb-0 Vencimiento: #{item.due_date}
        div.text-end
          img(src="/img/logo.png", alt="Logo", style="max-height:60px")

      .row.mt-4
        .col-md-6
          h5 De:
          p.mb-0 Tu Empresa S.A.
          p.mb-0 Dirección: Calle Falsa 123
          p.mb-0 Email: contacto@tuempresa.com
        .col-md-6
          h5 Para:
          p.mb-0 #{item.client_full_name}
          p.mb-0 Código: #{item.client_code}
          p.mb-0 Proyecto: #{item.project_name}

      hr.mt-4

      h5.mt-3 Detalle del presupuesto
      table.table.table-bordered
        thead.table-light
          tr
            th Descripción
            th.text-end Monto
        tbody
          each it in item.estimate_id.items
            tr
              td= it.description
              td.text-end $#{it.amount.toFixed(2)}

      if item.extras && item.extras.length > 0
        h5.mt-4 Extras
        table.table.table-bordered
          thead.table-light
            tr
              th Descripción
              th.text-end Monto
          tbody
            each extra in item.extras
              tr
                td= extra.description
                td.text-end $#{extra.amount.toFixed(2)}

      // Totales
      .row.mt-4.justify-content-end
        .col-md-6
          table.table
            tbody
              tr
                th Subtotal:
                td.totals $#{item.estimate_id.subtotal.toFixed(2)}
              if item.estimate_id.discount_amount
                tr
                  th Descuento (#{item.estimate_id.discount_percent}%):
                  td.totals -$#{item.estimate_id.discount_amount.toFixed(2)}
              if item.estimate_id.tax_amount
                tr
                  th Impuestos (#{item.estimate_id.tax_percent}%):
                  td.totals +$#{item.estimate_id.tax_amount.toFixed(2)}
              tr.table-active
                th Total a pagar:
                td.totals $#{item.total_amount.toFixed(2)}

      p.text-center.mt-5.text-muted(style="font-size:0.9rem")
        | Gracias por su compra. Esta factura fue generada automáticamente por el sistema.
