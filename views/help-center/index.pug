extends ../layout

block content
  style.
    [data-theme="dark"] .list-group-item-action {
      background-color: #2a2a2a !important;
      color: var(--text-primary) !important;
      margin-bottom: 2px;
      border-radius: 8px;
    }
    [data-theme="dark"] .list-group-item-action:hover {
      background-color: #3d3d3d !important;
    }

  .container-fluid.py-4
    //- Page Heading
    .d-flex.justify-content-between.align-items-center.mb-4
      div
        h1.h2.fw-bold.text-themed.mb-1 Centro de Ayuda y Soporte Técnico
        p.text-muted Bienvenido. Estamos aquí para ayudarte a resolver cualquier duda o inconveniente.

    .row.g-4
      //- Card 1: AI Assistant
      .col-12
        .card.border-0.shadow-sm.rounded-4
          .card-body.p-4
            .mb-4
              h3.h5.fw-bold.mb-1 Asistente Virtual NexusIA (24/7)
              p.text-muted.mb-0 Obtén respuestas instantáneas a tus preguntas más comunes.

            //- Composer
            .d-flex.align-items-center.gap-3.mb-3
              .flex-shrink-0
                //- Avatar placeholder
                .rounded-circle.bg-primary.bg-opacity-10.d-flex.align-items-center.justify-content-center(style="width: 48px; height: 48px;")
                   i.bi.bi-robot.fs-4.text-primary
              
              .flex-grow-1
                .input-group
                  input.form-control.bg-light.border-0.py-3.px-4(type="text" placeholder="¿Cómo podemos ayudarte?" style="border-radius: 12px 0 0 12px;")
                  button.btn.btn-primary.px-4(type="button" style="border-radius: 0 12px 12px 0;")
                    i.bi.bi-send-fill.me-2
                    span.d-none.d-sm-inline Enviar

            //- Chips
            .d-flex.flex-wrap.align-items-center.gap-2
              span.text-muted.small.me-2 O intenta con:
              button.btn.btn-light.btn-sm.rounded-pill.px-3 Gestión de Proyectos
              button.btn.btn-light.btn-sm.rounded-pill.px-3 Facturación
              button.btn.btn-light.btn-sm.rounded-pill.px-3 Reportes

      //- Card 2: Human Support
      .col-md-6
        .card.border-0.shadow-sm.rounded-4.h-100
          .card-body.p-4
            .mb-4
              h3.h5.fw-bold.mb-1 Soporte Humano Especializado
              p.text-muted.mb-0 Conecta con nuestro equipo de expertos para obtener ayuda personalizada.

            .d-grid.gap-3.mb-4
              button.btn.btn-primary.py-2.rounded-3
                i.bi.bi-ticket-detailed.me-2
                | Abrir un Ticket
              button.btn.btn-outline-secondary.py-2.rounded-3
                i.bi.bi-chat-text.me-2
                | Iniciar Chat en Vivo

            .text-center.p-3.bg-light.rounded-3.border.border-dashed
              p.small.text-muted.mb-0 O contáctanos por email: 
                span.fw-bold.text-dark soporte@nexuscore.com

      //- Card 3: Resources
      .col-md-6
        .card.border-0.shadow-sm.rounded-4.h-100
          .card-body.p-4
            .mb-4
              h3.h5.fw-bold.mb-1 Recursos de Ayuda y Formación
              p.text-muted.mb-0 Explora nuestra base de conocimientos y mantente al día.

            .list-group.list-group-flush.border-0
              a.list-group-item.list-group-item-action.border-0.px-0.py-3.d-flex.align-items-center(href="#")
                .rounded-3.bg-primary.bg-opacity-10.p-2.me-3
                  i.bi.bi-book.text-primary.fs-5
                div.flex-grow-1
                  h6.mb-0.fw-bold Manuales de Usuario
                  small.text-muted Guías detalladas sobre todas las funciones.
                i.bi.bi-chevron-right.text-muted

              a.list-group-item.list-group-item-action.border-0.px-0.py-3.d-flex.align-items-center(href="#")
                .rounded-3.bg-primary.bg-opacity-10.p-2.me-3
                  i.bi.bi-camera-video.text-primary.fs-5
                div.flex-grow-1
                  h6.mb-0.fw-bold Tutoriales en Video
                  small.text-muted Aprende paso a paso con nuestros videos.
                i.bi.bi-chevron-right.text-muted

              a.list-group-item.list-group-item-action.border-0.px-0.py-3.d-flex.align-items-center(href="#")
                .rounded-3.bg-primary.bg-opacity-10.p-2.me-3
                  i.bi.bi-newspaper.text-primary.fs-5
                div.flex-grow-1
                  h6.mb-0.fw-bold Notas de la Versión
                  small.text-muted Descubre las últimas actualizaciones.
                i.bi.bi-chevron-right.text-muted

            .mt-3.p-3.bg-success.bg-opacity-10.rounded-3.d-flex.justify-content-between.align-items-center
              span.small.fw-bold.text-success-emphasis Estatus Operacional
              .d-flex.align-items-center
                .rounded-circle.bg-success.me-2(style="width: 10px; height: 10px;")
                span.small.text-success.fw-bold Todos los Sistemas Funcionando

  //- FLOATING CHAT WIDGET
  #nexus-chat-widget.position-fixed.bottom-0.end-0.m-4(style="z-index: 1050; display: none;")
    .card.shadow-lg.border-0.rounded-4(style="width: 380px; height: 600px; max-height: 80vh;")
      //- Header
      .card-header.bg-primary.text-white.p-3.rounded-top-4.border-0
        .d-flex.justify-content-between.align-items-center
          .d-flex.align-items-center.gap-2
            i.bi.bi-robot.fs-4
            div
              h6.mb-0.fw-bold Asistente Virtual NexusIA
              .d-flex.align-items-center.gap-1
                .rounded-circle.bg-success(style="width: 8px; height: 8px;")
                small.text-white-50 En línea - 24/7
          button.btn.btn-link.text-white.p-0(onclick="toggleChatWidget()")
            i.bi.bi-x-lg

      //- Body
      .card-body.p-3.overflow-auto.d-flex.flex-column.gap-3.bg-light
        //- Welcome Message
        .d-flex.gap-2
          .flex-shrink-0
            .rounded-circle.bg-primary.bg-opacity-10.d-flex.align-items-center.justify-content-center(style="width: 32px; height: 32px;")
              i.bi.bi-robot.text-primary
          .bg-white.p-3.rounded-3.shadow-sm
            p.mb-0.small.text-dark ¡Hola! Soy tu Asistente Virtual NexusIA. ¿Cómo puedo ayudarte hoy con NexusCore?

        //- Quick Actions
        .d-grid.gap-2.px-4
          button.btn.btn-outline-primary.btn-sm.text-start.rounded-3(onclick="sendQuickMessage('¿Cómo registro mi tiempo?')")
            small ¿Cómo registro mi tiempo (RF-008)?
          button.btn.btn-outline-primary.btn-sm.text-start.rounded-3(onclick="sendQuickMessage('Ver estado de un proyecto')")
            small Ver estado de un proyecto
          button.btn.btn-outline-primary.btn-sm.text-start.rounded-3(onclick="sendQuickMessage('Ayuda con facturación')")
            small Ayuda con facturación (RF-001)

      //- Footer
      .card-footer.p-3.bg-white.border-top-0.rounded-bottom-4
        .input-group
          input.form-control.bg-light.border-0(type="text" placeholder="Escribe tu pregunta..." style="border-radius: 10px 0 0 10px;")
          button.btn.btn-primary(type="button" style="border-radius: 0 10px 10px 0;")
            i.bi.bi-send-fill

  //- Floating Button (Trigger)
  button#nexus-chat-trigger.btn.btn-primary.rounded-circle.position-fixed.bottom-0.end-0.m-4.shadow-lg.d-flex.align-items-center.justify-content-center(
    onclick="toggleChatWidget()" 
    style="width: 60px; height: 60px; z-index: 1040;"
  )
    i.bi.bi-chat-dots-fill.fs-3

block scripts
  script.
    // Chat Widget Logic
    window.toggleChatWidget = function() {
      const widget = document.getElementById('nexus-chat-widget');
      const trigger = document.getElementById('nexus-chat-trigger');
      
      if (widget.style.display === 'none') {
        widget.style.display = 'block';
        trigger.style.display = 'none';
      } else {
        widget.style.display = 'none';
        trigger.style.display = 'flex';
      }
    };

    window.sendQuickMessage = function(msg) {
      // Placeholder for sending message logic
      console.log('Sending message:', msg);
    };
