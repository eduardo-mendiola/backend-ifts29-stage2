extends ../layout.pug

block content
  .d-flex.justify-content-between.align-items-center.mb-4
    h1.mb-4 Usuario del sistema: #{ `${item.username}` }
    a.btn.btn-gray(href="/users", tabindex="1") Volver
 

  table.table
    tbody
      tr
        th ID
        td= item.id
      tr
        th Código
        td= item.code
      tr
        th Email
        td= item.email
      tr
        th Rol
        td= item.role_id.name
      tr
        th Tipo de Rol
        td
          if item.is_temporary_role
            span.badge.bg-warning.text-dark
              i.bi.bi-clock-fill.me-1
              | Temporal
          else
            span.badge.bg-success
              i.bi.bi-infinity.me-1
              | Permanente
      if item.is_temporary_role
        tr
          th Fecha de Expiración
          td
            strong.text-warning= item.role_expiration_date ? new Date(item.role_expiration_date).toLocaleString('es-AR', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' }) : 'N/A'
        tr
          th Duración Configurada
          td= `${item.role_duration_value || 'N/A'} ${item.role_duration_unit || ''}`
        tr
          th Rol de Respaldo
          td= item.fallback_role_id ? item.fallback_role_id.name : 'N/A'
      tr 
        th Nombre de usuario
        td= item.username
      tr 
        th Contraseña
        td= item.password_hash      
      tr
        th Ultimo inicio de sesión
        td= item.last_login ? new Date(item.last_login).toLocaleString('es-AR') : 'N/A'
      tr 
        th Estado
        td= item.is_active ? 'Activo' : 'Inactivo'
      tr
        th Fecha de creación
        td= item.created_at
      tr
        th Última actualización
        td= item.updated_at

  .mt-3
    a.btn.btn-gray.me-2(href="/users", tabindex="2") Volver a la lista
    if hasPermission('edit_users')
      a.btn.btn-primary.me-2(href=`/users/${item.id}/edit`, tabindex="3") Editar
