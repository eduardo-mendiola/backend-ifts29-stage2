extends ../layout.pug
//- views/payments/new.pug
block content
  .d-flex.justify-content-center
    form.bg-dark.text-white.p-4.rounded.shadow(action="/payments", method="POST", style="width:100%; max-width:1200px; max-height:100vh; overflow-y:auto;")
      .d-flex.justify-content-between.align-items-center.mb-3
        h1.mb-0 Crear Nuevo Pago
        a.btn.btn-gray(href="/payments", tabindex="13") Volver a la lista

      // Contenedor de 2 columnas
      .row.g-3
        // Columna izquierda
        .col-md-6
          .mb-3
            label.form-label(for="invoice_number") Número de Factura
            input#invoice_number.form-control(type="text", name="invoice_number", tabindex="1")
          .mb-3
            label.form-label(for="currency") Moneda
            select#currency.form-select(name="currency", required, tabindex="3")
              option(value="") Seleccionar una Moneda...
              if currency_labels
                each label, key in currency_labels
                  option(
                    value=key,
                    selected=(item.currency && item.currency.toString() === key)
                  ) #{label}
              else
                option(value="") No hay monedas disponibles
            .mb-3
            label.form-label(for="amount") Monto Total
            input#amount.form-control(type="number", name="amount", tabindex="7")

        // Columna derecha
        .col-md-6
          .mb-3
            label.form-label(for="transition_id") Código de Transacción
            input#transition_id.form-control(type="text", name="transition_id", tabindex="2")
          .mb-3
            label.form-label(for="payment_date") Fecha 
            input#payment_date.form-control(type="date", name="payment_date", value=item.payment_date || new Date().toISOString().split('T')[0], tabindex="6")
          .mb-3
            label.form-label(for="payment_method") Método de Pago
            select#payment_method.form-select(name="payment_method", required, tabindex="8")
              option(value="") Seleccionar un Método de Pago...
              if payment_method_labels
                each label, key in payment_method_labels
                  option(
                    value=key,
                    selected=(item.payment_method && item.payment_method.toString() === key)
                  ) #{label}
              else
                option(value="") No hay métodos de pago disponibles
          .mb-3
            label.form-label(for="description") Descripción
            textarea#description.form-control(name="description", required, tabindex="4")
          
      button.btn.btn-primary.mt-3(type="submit", tabindex="11") Crear Gasto
      a.btn.btn-danger-soft.mt-3.ms-3(href="/payments", tabindex="12") Cancelar
